<div class="sensor-container">
  <!-- Header Section -->
  <div class="header">
    <button (click)="goToDispositivos()" class="back-button">
      ← Volver a Dispositivos
    </button>
    <div class="status-indicator">
      <h1>Dispositivo: {{ deviceId }}</h1>
      <div class="connection-status">
        <div [class]="connectionStatus ? 'connected' : 'disconnected'"></div>
        <span>{{ connectionStatus ? 'Conectado' : 'Desconectado' }}</span>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>Cargando datos del dispositivo...</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <!-- Main Content -->
  <div *ngIf="!loading && !errorMessage" class="main-content">
    <!-- Sensor Data Section -->
    <section class="sensor-section">
      <h2>Datos de Sensores</h2>
      <div class="sensor-grid">
        <div *ngFor="let sensorKey of sensorKeys" class="sensor-card">
          <h3>{{ sensorKey | titlecase }}</h3>
          <div class="sensor-value">
            {{ deviceData[sensorKey] | number:'1.0-2' }}
          </div>
        </div>
      </div>
    </section>

    <!-- Plant Assignment Section -->
    <section class="assignment-section">
      <h2>Asignación a Planta</h2>
      <div class="assignment-form">
        <div class="form-group">
          <label>Planta:</label>
          <select [(ngModel)]="selectedPlantId" class="form-select">
            <option value="">Selecciona una planta</option>
            <option *ngFor="let plant of plants" [value]="plant.id">
              {{ plant.name }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label>Sensor:</label>
          <select [(ngModel)]="selectedSensor" class="form-select">
            <option value="">Selecciona un sensor</option>
            <option *ngFor="let sensorKey of sensorKeys" [value]="sensorKey">
              {{ sensorKey | titlecase }}
            </option>
          </select>
        </div>

        <button (click)="assignSensorToPlant()" class="assign-button" [disabled]="!selectedPlantId || !selectedSensor">
          Asignar Sensor
        </button>
      </div>
    </section>
  </div>
</div>