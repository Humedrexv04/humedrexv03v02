<div class="camera-container">
  <h2 class="camera-title">Captura de fotos</h2>

  <!-- Botón para tomar foto -->
  <button class="camera-button" [disabled]="loading" (click)="takePicture()">
    <span *ngIf="!loading">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
        <path d="M4 5h3l2-2h6l2 2h3a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2z" fill="none"
          stroke="currentColor" stroke-width="2" />
        <circle cx="12" cy="13" r="4" fill="none" stroke="currentColor" stroke-width="2" />
      </svg>
      Tomar foto
    </span>
    <span *ngIf="loading">Procesando...</span>
  </button>

  <!-- Mensaje de error -->
  <div class="error-message" *ngIf="errorMessage">
    {{ errorMessage }}
  </div>

  <!-- Galería de imágenes -->
  <div class="image-gallery" *ngIf="imgUrls && imgUrls.length > 0">
    <div class="image-item" *ngFor="let imgUrl of imgUrls; let i = index" (mouseenter)="toggleHoverIndex(i)"
      (mouseleave)="toggleHoverIndex(null)">

      <img [src]="imgUrl" [alt]="'Foto capturada ' + (i + 1)" (click)="openImage(i, $event)" />

      <div class="image-overlay" *ngIf="hoverIndex === i">
        <button class="delete-button" (click)="deleteImage(i, $event)">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2m-6 5v6m4-6v6"
              stroke="currentColor" stroke-width="2" fill="none" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Vista de imagen ampliada -->
  <div class="image-viewer" *ngIf="selectedImage" (click)="closeImage()">
    <img [src]="selectedImage" alt="Imagen ampliada" />
    <button class="close-button" (click)="closeImage(); $event.stopPropagation()">
      ×
    </button>
  </div>
</div>